import { Link } from '@nextui-org/react'

<CodeWithAccoridions>
## !!accordions Section 1: Setup and initialize a new React project with NextUI

Before we dive into coding the profile page, let's set up our project:

1.  **Prerequisites:** Ensure you have Node.js and yarn (or npm) installed on your machine.
2.  **NextUI CLI:** Open your terminal and run the following command to install the NextUI CLI globally, execute the following command in your terminal:

```bash
yarn add nextui-cli -g
```

3.  **Init a new NextUI project :** Initialize a new NextUI project using the init command. This sets up your project with the necessary configurations:

```bash
nextui init my-nextui-app
```

You will be prompted to configure your project:

```bash
? Which components would you like to add? › - Space to select. Return to submit

Instructions:
    ↑/↓: Highlight option
    ←/→/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer

Filtered results for: Enter something to filter
    ◯  accordion
    ◯  autocomplete
    ◯  avatar
    ◯  badge
    ◯  breadcrumbs◉  button
    ◯  card
    ◯  checkbox
    ◯  chip
    ◯  code
```

You can just use the default configuration and add all the components for now.

4.  **Start Development Server:** Install the dependencies to start the local server:

```bash
cd my-nextui-app && yarn install
```

```bash
yarn dev
```

You should now have a NextUI startup screen at `http://localhost:3000/` in your browser, ready for us to transform into a stunning profile page!

## !!accordions Section 2: Building the FeaturePhotos component

In this section, we'll craft a captivating header showcasing a rotating carousel of feature photos using NextUI for styling, Embla Carousel React for the core carousel functionality, and Tailwind CSS for additional customization.

1. Files and Structure:

   - `feature-photos.tsx`: The main component file for the FeaturePhotos component.
   - `carousel-dot-buttons.tsx`: A component for rendering navigation dots in the carousel.
   - `constants.ts`: A file containing constants for styling.
   - `types.ts`: TypeScript file for defining the component's prop types.

2. Dependencies:

   - `embla-carousel-react`: A lightweight carousel library for React. Install it using `yarn add embla-carousel-react`.
   - `@nextui-org/react`: NextUI components for building the UI

3. Deep dive into `feature-photo.tsx` file:

   - **Props:**

     - `photos`: An array of photo URLs to display in the carousel.
     - `showDots`: A boolean to toggle the visibility of navigation dots.

   - **Carousel Setup:**

     - `useEmblaCarousel` to control the carousel. It's a handy hook provided from `embla-carousel-react` giving us a `ref` to attach to our wrapping element, which is needed to cover the scroll overflow
     - `useDotButton` to manage the state of the navigation dots. It provides the selected index, an array of scroll snap points, and a function to handle dot button clicks.
     - `<CarouselDotButton/>` is a custom component that renders a dot button for each photo. It receives an `onClick` function to handle the click event and a `className` to style the button based on its active state.
     - We will break down the `CarouselDotButton` component and `useDotButton` hook later.

   - **Handling Navigation Dot Button Clicks:**

     - `handleDotButtonClick` is a function that takes an index and returns another function. This returned function, when called, triggers the `onDotButtonClick` function with the provided index.

     ```ts
     const handleDotButtonClick = (index: number) => {
       // !border(1:3)
       return () => {
         onDotButtonClick(index)
       }
     }
     ```

     ```tsx
     <CarouselDotButton
       ...
       // !border(1:1)
       onClick={handleDotButtonClick(index)}
       ...
     />
     ```

     - This pattern is known as a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures" target="_blank">closure</a>, allowing each dot button to have its own specific behavior when clicked.

   - **Rendering:**

     - The component returns a `<section>` element with two main parts:
       - A block containing the carousel. Photos are mapped elements containing an `<Image>` component from '@nextui-org/react' for each photo. Each image's height is set to `FEATURE_HEADER_HEIGHT` pixels, and the width is set to fill the screen.
       - A conditional block that renders navigation dots using `<CarouselDotButton/>` if `showDots` to visually indicate the currently selected dot.

   - **Styling:**
      - The carousel and its elements are styled using Tailwind CSS classes for layout and appearance. The `className` properties dynamically apply styles based on the component's state and props, such as adjusting the opacity of the active dot.
      - We use the `cn` utility class from NextUI to conditionally apply classes based on the active state of the dot. This util function is also used to join `classNames` together avoiding the TailwindCSS classes conflicts.
      ```tsx
      <CarouselDotButton
         ...
         className={cn(
            'inline-flex cursor-pointer border-0 p-0 m-0 size-2 items-center justify-center rounded-[50%] ml-2 appearance-none bg-gray-300 opacity-50',
            {
               // !callout[/bg-gray-300 opacity-100/] This class will be applied when the index is equal to the selectedIndex
               'bg-gray-300 opacity-100': index === selectedIndex,
            }
         )}
      />
      ```

4. Deep dive into `carousel-dot-buttons.tsx` file: <br/>

   - **`useDotButton` hook:**

     - The main purpose of this hook is to manage the state of the navigation dots in the carousel. It takes `emblaApi` as an argument, which is the carousel API needed for interacting with the carousel.
     - It has an effect that listens to the `reInit` and `select` from embla carousel API to update the selected index.
     - The `onDotButtonClick` function execute the `scrollTo` method from the embla carousel API to scroll to the selected photo.
     - The `scrollSnaps` array contains the scroll snap points for each photo in the carousel.
     - The `selectedIndex` variable holds the index of the currently selected photo.
     - The `useDotButton` hook returns an object with the selected index, scroll snaps, and a function to handle dot button clicks. So we can use this object in the `FeaturePhotos` component.

   - **`CarouselDotButton` component:**
     - This component is just a wrapper of the native html button element. It takes all the props that a button element can take, so we can style the button based on its active state and handle the click event from the `FeaturePhotos` component.

**Live Demo:** <br/>
We've created a Storybook story for the `FeaturePhotos` component to showcase its functionality and appearance. You can check it out here: <a href="https://66a1ae67d3806ba8755e9ebe-rktxlyjzkm.chromatic.com/?path=/docs/tutorials-profile-ui-components-feature-photos--docs" target="_blank">FeaturePhotos Story</a>

Now that we've built the `FeaturePhotos` component, we can move on to the next section of our profile page.

## !!accordions Section 3: Designing the Profile Information Section

In this section, we'll create the ProfileInfo component which is responsible for displaying the main information section of a user's profile page.<br/>

**Step-by-Step Guide:**
This component presents the user's avatar, name, username, title (optional), bio (optional), location (optional), website (optional), and a button to edit the profile.

Now let's open the `profile-info.tsx` tab and we will break it down step by step:

- `Avatar` component from '@nextui-org/react' is used to display the user's avatar. If the avatar URL is not provided, we use a fallback text generated from the user's name with the `getAvatarFallback` util function.
- `Link` component from '@nextui-org/react' is used to display the user's company name as a clickable link to their website.
- `Spacer` component is used to add vertical spacing between elements.
- `Paragraph` and `Subtle` components are custom typography components for displaying text like the user's name, username, and bio.
- Icons like `Link` and `MapPin` are imported from `lucide-react` library. So you will need to install it `yarn add lucide-react` if you haven't already.
- `InfoLine` is a reusable component that displays an icon and text in a row. It's used to show the user's location and website. You can open the `info-line.tsx` tab to see its implementation.

**A few notes:**

- The `ProfileInfo` component receives a `profile` prop containing the user's information and a `company` prop containing the company's information.
- The `Edit profile` button is a placeholder for now. You can replace it with a real button component and add functionality to edit the profile.
- There's the full demo of the `ProfileInfo` component in Storybook: <a href="https://66a1ae67d3806ba8755e9ebe-rktxlyjzkm.chromatic.com/?path=/docs/tutorials-profile-ui-components-profile-info--docs" target="_blank">ProfileInfo Story</a>

So far, we've created the `FeaturePhotos` and `ProfileInfo` components. Next, we'll implement the Profile Stats section.

## !!accordions Section 4: Creating the Profile Stats Section

In this section, we'll build the ProfileStats component, which displays the user's profile statistics like followers, following, and posts count.<br/>
Since it's a pretty straightforward component, let's dive into the implementation by opening the `profile-stats.tsx` tab:

- The `ProfileStats` component receives a `stats` prop containing the user's statistics.
- We built a `formatNumber` utility function to format the numbers with commas and a maximum of 3 decimal places.
- `StatsBlock` is a component that displays a label and value in a column. It's used to show the followers, following, and posts count.
- There's the full demo of the `ProfileStats` component in Storybook: <a href="https://66a1ae67d3806ba8755e9ebe-rktxlyjzkm.chromatic.com/?path=/docs/tutorials-profile-ui-components-profile-stats--docs" target="_blank">ProfileStats Story</a>

## !!accordions Section 5: Implementing the Profile Timeline

In this section, we'll create the ProfileTimeline component, which displays a list of posts in a user's profile.<br/>

</CodeWithAccoridions>
